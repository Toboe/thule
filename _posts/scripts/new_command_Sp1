Title: A bash timer
Author: 
Date: Sat, 24 Aug 2013 20:18:45 +0400
Link: http://feedproxy.google.com/~r/Command-line-fu/~3/d5hP_YFNp-8/a-bash-timer

$ alias timer='export ts=$(date +%s);p='\''$(date -u -d @"$(($(date +%s)-$ts))"
+"%H.%M.%S")'\'';watch -n 1 -t banner $p;eval "echo $p"'

Starts and shows a timer. banner command is a part of the sysvbanner package. 
Instead of the banner an echo or figlet commands could be used. Stop the timer 
with Ctrl-C and elapsed time will be shown as the result.

  * View this command to comment, vote or add to favourites[1]
  * View all commands by ichbins[2]

[image 4][3]

by David Winterbottom (codeinthehole.com[5])
[image 6]

Links: 
[1]: http://www.commandlinefu.com/commands/view/12648/a-bash-timer (link)
[2]: http://www.commandlinefu.com/commands/by/ichbins (link)
[3]: http://www.commandlinefu.com (link)
[4]: http://www.commandlinefu.com/images/small-logo.jpg (image)
[5]: http://codeinthehole.com (link)
[6]: http://feeds.feedburner.com/~r/Command-line-fu/~4/d5hP_YFNp-8 (image)
Title: a (slightly) better `trash`
Author: 
Date: Fri, 23 Aug 2013 20:57:58 +0400
Link: http://feedproxy.google.com/~r/Command-line-fu/~3/0VJqlUxCAgw/a-slightly-better-trash

$ trash <>file> # now doesn't overwrite previously trashed directories

Say you trash a directory to your .Trash. For one reason or another, a 
directory that's the same name as the previously trashed directory gets created
and now you need to trash it too. My previous trash function would barf, being 
unable to overwrite the directory in the .Trash folder. Well, I didn't want to 
mv -f the thing; you never know if you want the old one around for a while. So,
instead, I append the time onto the old directory in order to a) make the 
function *not* barf and b) to keep track of the order in which the directories 
were trashed.

May sound like an edge case, but I encounter it often. NOTE: I'm still a bit 
confused about quoting $@, as the bash docs say that $@ expands to *quoted* 
elements. I don't ever use empty space in my filenames, so ... Feedback 
appreciated.

function trash {

if [[ -z "$*" ]] ; then

echo "Usage: trash "

else

date="$( date +%F )"

trashdir="${HOME}/.Trash/${date}"

[[ -d "${trashdir}" ]] || mkdir -p "${trashdir}"

for file in $@ ; do

trashfile="${trashdir}/${file}"

# if trashfile is a directory, chop the filal '/' so the renaming is valid

[[ -e "$trashfile" ]] && mv -v "${trashfile}" "${trashfile%/}_$(date "+%H%M" )

mv "${file}" "${trashdir}" && echo "${file} trashed!"

done

fi

}

  * View this command to comment, vote or add to favourites[1]
  * View all commands by thebillywayne[2]

[image 4][3]

by David Winterbottom (codeinthehole.com[5])
[image 6]

Links: 
[1]: http://www.commandlinefu.com/commands/view/12646/a-slightly-better-trash (link)
[2]: http://www.commandlinefu.com/commands/by/thebillywayne (link)
[3]: http://www.commandlinefu.com (link)
[4]: http://www.commandlinefu.com/images/small-logo.jpg (image)
[5]: http://codeinthehole.com (link)
[6]: http://feeds.feedburner.com/~r/Command-line-fu/~4/0VJqlUxCAgw (image)
Title: Check SSH public and private keys matching
Author: 
Date: Sat, 31 Aug 2013 18:01:33 +0400
Link: http://feedproxy.google.com/~r/Command-line-fu/~3/veEwbLUB34M/check-ssh-public-and-private-keys-matching

$ diff <>(ssh-keygen -y -f ~/.ssh/id_rsa) <>(cut -d' ' -f1,2 ~/.ssh/id_rsa.pub)

Tested in bash4

  * View this command to comment, vote or add to favourites[1]
  * View all commands by fernandomerces[2]

[image 4][3]

by David Winterbottom (codeinthehole.com[5])
[image 6]

Links: 
[1]: http://www.commandlinefu.com/commands/view/12670/check-ssh-public-and-private-keys-matching (link)
[2]: http://www.commandlinefu.com/commands/by/fernandomerces (link)
[3]: http://www.commandlinefu.com (link)
[4]: http://www.commandlinefu.com/images/small-logo.jpg (image)
[5]: http://codeinthehole.com (link)
[6]: http://feeds.feedburner.com/~r/Command-line-fu/~4/veEwbLUB34M (image)
Title: Create thumbnails and a HTML page for listing them (with links to sources)
Author: 
Date: Mon, 26 Aug 2013 00:45:49 +0400
Link: http://feedproxy.google.com/~r/Command-line-fu/~3/K1apEuXC5OU/create-thumbnails-and-a-html-page-for-listing-them-with-links-to-sources

$ mogrify -format gif -define jpeg:size=500x180 -auto-orient -thumbnail 250x90 
'*.jpg' && (echo "<>ul>"; for i in *.gif; do basename=$(echo $i | rev | cut -d.
-f2- | rev) ; echo "<>li><>a href='$basename.jpg'><>img 
src='$basename.gif'><>/a>"; done) > list.html

The input images are assume to have the "jpg" extension. Mogrify will overwrite
any gif images with the same name! Will not work with names with spaces.

  * View this command to comment, vote or add to favourites[1]
  * View all commands by ysangkok[2]

[image 4][3]

by David Winterbottom (codeinthehole.com[5])
[image 6]

Links: 
[1]: http://www.commandlinefu.com/commands/view/12654/create-thumbnails-and-a-html-page-for-listing-them-with-links-to-sources (link)
[2]: http://www.commandlinefu.com/commands/by/ysangkok (link)
[3]: http://www.commandlinefu.com (link)
[4]: http://www.commandlinefu.com/images/small-logo.jpg (image)
[5]: http://codeinthehole.com (link)
[6]: http://feeds.feedburner.com/~r/Command-line-fu/~4/K1apEuXC5OU (image)
Title: Detect broken video files with mplayer and bash in the current directory
Author: 
Date: Wed, 21 Aug 2013 02:23:11 +0400
Link: http://feedproxy.google.com/~r/Command-line-fu/~3/NwHVtIZnZw8/detect-broken-video-files-with-mplayer-and-bash-in-the-current-directory

$ for i in *.flv *.mkv *.avi; do mplayer -ao null -vo null -ss 0 -endpos 1 
>/dev/null "$i" 2> >(grep -qi error && echo >&2 "$i seems bad"); done

If you want avoid to be annoyed when playing your favourite video files with 
your video player, first run this command to stash wrong files (and test tricks
to play these wrong files).

  * View this command to comment, vote or add to favourites[1]
  * View all commands by sputnick[2]

[image 4][3]

by David Winterbottom (codeinthehole.com[5])
[image 6]

Links: 
[1]: http://www.commandlinefu.com/commands/view/12637/detect-broken-video-files-with-mplayer-and-bash-in-the-current-directory (link)
[2]: http://www.commandlinefu.com/commands/by/sputnick (link)
[3]: http://www.commandlinefu.com (link)
[4]: http://www.commandlinefu.com/images/small-logo.jpg (image)
[5]: http://codeinthehole.com (link)
[6]: http://feeds.feedburner.com/~r/Command-line-fu/~4/NwHVtIZnZw8 (image)
Title: extract XML RSS etc by tags such as  or  or 
Author: 
Date: Sat, 31 Aug 2013 18:53:54 +0400
Link: http://feedproxy.google.com/~r/Command-line-fu/~3/IGqZmzBEPpk/extract-xml-rss-etc-by-tags-such-as-or-or-

$ curl ${URL} 2>/dev/null|grep "<>${BLOCK}>"|sed -e 
"s/.*\<>${BLOCK}\>\(.*\)\<>\/${BLOCK}\>.*/\1/g"

set BLOCK to "title" or any other HTML / RSS / XML tag and curl URL to get 
everything in-between e.g. some text

  * View this command to comment, vote or add to favourites[1]
  * View all commands by c3w[2]

[image 4][3]

by David Winterbottom (codeinthehole.com[5])
[image 6]

Links: 
[1]: http://www.commandlinefu.com/commands/view/12671/extract-xml-rss-etc-by-tags-such-as-or-or- (link)
[2]: http://www.commandlinefu.com/commands/by/c3w (link)
[3]: http://www.commandlinefu.com (link)
[4]: http://www.commandlinefu.com/images/small-logo.jpg (image)
[5]: http://codeinthehole.com (link)
[6]: http://feeds.feedburner.com/~r/Command-line-fu/~4/IGqZmzBEPpk (image)
Title: Periodically run a command without hangups, and send the output to my e-mail
Author: 
Date: Mon, 19 Aug 2013 21:21:37 +0400
Link: http://feedproxy.google.com/~r/Command-line-fu/~3/nMLpmERwnqM/periodically-run-a-command-without-hangups-and-send-the-output-to-my-e-mail

$ nohup bash -c "while true; do ps -x | mail pascalv@mmmmail.com; sleep 3600; 
done" | mail pascalv@mmmmail.com &

Run "ps -x" (process status) in the background every hour (in this example).

The outputs of both "nohup" and "ps -x" are sent to the e-mail (instead of 
nohup.out and stdout and stderr).

If you like it, replace "ps -x" by the command of your choice, replace 3600 (1 
hour) by the period of your choice.

  * View this command to comment, vote or add to favourites[1]
  * View all commands by pascalv[2]

[image 4][3]

by David Winterbottom (codeinthehole.com[5])
[image 6]

Links: 
[1]: http://www.commandlinefu.com/commands/view/12630/periodically-run-a-command-without-hangups-and-send-the-output-to-my-e-mail (link)
[2]: http://www.commandlinefu.com/commands/by/pascalv (link)
[3]: http://www.commandlinefu.com (link)
[4]: http://www.commandlinefu.com/images/small-logo.jpg (image)
[5]: http://codeinthehole.com (link)
[6]: http://feeds.feedburner.com/~r/Command-line-fu/~4/nMLpmERwnqM (image)
Title: Tunnel ssh through Socks Proxy
Author: 
Date: Mon, 19 Aug 2013 17:08:19 +0400
Link: http://feedproxy.google.com/~r/Command-line-fu/~3/TT9CEAsvk3M/tunnel-ssh-through-socks-proxy

$ ssh -o ProxyCommand='nc -x ProxyHost:8080 %h %p' TargetHost

If you are blocked or need to use a Socks proxy

  * View this command to comment, vote or add to favourites[1]
  * View all commands by UnixSage[2]

[image 4][3]

by David Winterbottom (codeinthehole.com[5])
[image 6]

Links: 
[1]: http://www.commandlinefu.com/commands/view/12629/tunnel-ssh-through-socks-proxy (link)
[2]: http://www.commandlinefu.com/commands/by/UnixSage (link)
[3]: http://www.commandlinefu.com (link)
[4]: http://www.commandlinefu.com/images/small-logo.jpg (image)
[5]: http://codeinthehole.com (link)
[6]: http://feeds.feedburner.com/~r/Command-line-fu/~4/TT9CEAsvk3M (image)
